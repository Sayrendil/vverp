import{u as V,r as H,c as Z,w as a,a as t,b as m,d as n,e as g,f as x,l as $,g as d,t as o,o as r,n as p,F as A,h as W,j as D,C as N}from"./app-BN2_oI1u.js";import{_ as G}from"./AppLayout-BLhEGTFG.js";import{_ as j}from"./DangerButton-Bk_0mbRK.js";import{_ as M}from"./SecondaryButton-BrpUzYZr.js";/* empty css            */const T={class:"flex justify-between items-center"},L={class:"font-semibold text-xl text-white leading-tight"},S={class:"flex gap-2"},Q={class:"py-10 px-4 sm:px-6 lg:px-8"},R={class:"max-w-7xl mx-auto"},F={class:"bg-gray-800/50 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-8 mb-6 shadow-xl"},_={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4"},J={class:"text-3xl font-bold text-white"},P={key:0,class:"mb-6"},Y={class:"text-gray-300 leading-relaxed"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},E={class:"flex items-center gap-2"},O={class:"text-white font-medium"},U={class:"flex items-center gap-2"},X={class:"text-white font-medium"},K={class:"flex items-center gap-2"},tt={class:"text-white font-medium"},et={class:"flex items-center gap-2"},st={class:"text-white font-medium"},ot={class:"flex items-center gap-2"},rt={class:"w-8 h-8 rounded-full bg-gradient-to-r from-green-600 to-emerald-600 flex items-center justify-center text-white text-sm font-semibold"},it={class:"text-white font-medium"},nt={key:0,class:"flex items-center gap-2"},lt={class:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-600 to-cyan-600 flex items-center justify-center text-white text-sm font-semibold"},at={class:"text-white font-medium"},dt={key:1,class:"text-gray-500"},mt={class:"flex items-center gap-2"},ut={class:"text-white font-medium"},ct={class:"flex items-center gap-2"},gt={class:"text-white font-medium"},xt={key:0,class:"bg-gray-800/50 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-6 shadow-xl"},ft={class:"text-xl font-bold text-white mb-4 flex items-center gap-2"},ht={class:"text-sm text-gray-400"},kt={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},bt=["href"],vt=["src"],wt=["href"],yt=["href","download"],pt={class:"text-xs text-gray-400 text-center break-all"},jt={class:"flex items-center justify-center min-h-screen px-4"},Mt={class:"relative bg-gray-800 rounded-2xl p-8 max-w-md w-full shadow-2xl border border-gray-700"},Ct={class:"flex gap-3 justify-end"},Zt={__name:"Show",props:{ticket:Object},setup(s){const C=s,f=V({}),u=H(!1),h=l=>new Date(l).toLocaleString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),I=l=>({Создана:"bg-gray-500/20 text-gray-400 border-gray-500/50","В работе":"bg-blue-500/20 text-blue-400 border-blue-500/50",Подтверждена:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50",Отложена:"bg-orange-500/20 text-orange-400 border-orange-500/50",Завершена:"bg-green-500/20 text-green-400 border-green-500/50"})[l]||"bg-gray-500/20 text-gray-400 border-gray-500/50",B=()=>{f.delete(route("tickets.destroy",C.ticket.id))},z=l=>{l.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzI4MjgyOCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM2NjY2NjYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5ObyBpbWFnZTwvdGV4dD48L3N2Zz4="};return(l,e)=>(r(),Z(G,{title:"Просмотр заявки"},{header:a(()=>[t("div",T,[t("h2",L," Заявка #"+o(s.ticket.id),1),t("div",S,[m(M,{onClick:e[0]||(e[0]=c=>x(N).visit(l.route("tickets.edit",s.ticket.id)))},{default:a(()=>[...e[4]||(e[4]=[d(" Редактировать ",-1)])]),_:1}),m(j,{onClick:e[1]||(e[1]=c=>u.value=!0)},{default:a(()=>[...e[5]||(e[5]=[d(" Удалить ",-1)])]),_:1})])])]),default:a(()=>{var c,k,b,v,w,y;return[t("div",Q,[t("div",R,[m(x($),{href:l.route("tickets.index"),class:"inline-flex items-center text-gray-400 hover:text-green-400 mb-6 transition-colors"},{default:a(()=>[...e[6]||(e[6]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),d(" Назад к списку ",-1)])]),_:1},8,["href"]),t("div",F,[t("div",_,[t("h1",J,o(s.ticket.title),1),s.ticket.status?(r(),n("span",{key:0,class:p(["inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border",I(s.ticket.status.name)])},o(s.ticket.status.name),3)):g("",!0)]),s.ticket.description?(r(),n("div",P,[e[7]||(e[7]=t("h3",{class:"text-lg font-semibold text-white mb-2"},"Описание",-1)),t("p",Y,o(s.ticket.description),1)])):g("",!0),t("div",q,[t("div",null,[e[9]||(e[9]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Категория",-1)),t("div",E,[e[8]||(e[8]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1)),t("span",O,o(((c=s.ticket.ticketCategory)==null?void 0:c.name)||"Не указана"),1)])]),t("div",null,[e[11]||(e[11]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Тип проблемы",-1)),t("div",U,[e[10]||(e[10]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),t("span",X,o(((k=s.ticket.problem)==null?void 0:k.name)||"Не указан"),1)])]),t("div",null,[e[13]||(e[13]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Магазин",-1)),t("div",K,[e[12]||(e[12]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),t("span",tt,o(((b=s.ticket.store)==null?void 0:b.name)||"Не указан"),1)])]),t("div",null,[e[15]||(e[15]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Касса",-1)),t("div",et,[e[14]||(e[14]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1)),t("span",st,o(((v=s.ticket.cash)==null?void 0:v.name)||"Не указана"),1)])]),t("div",null,[e[16]||(e[16]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Автор",-1)),t("div",ot,[t("div",rt,o(((w=s.ticket.author)==null?void 0:w.name.charAt(0))||"?"),1),t("span",it,o(((y=s.ticket.author)==null?void 0:y.name)||"Неизвестен"),1)])]),t("div",null,[e[17]||(e[17]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Исполнитель",-1)),s.ticket.executor?(r(),n("div",nt,[t("div",lt,o(s.ticket.executor.name.charAt(0)),1),t("span",at,o(s.ticket.executor.name),1)])):(r(),n("span",dt,"Не назначен"))]),t("div",null,[e[19]||(e[19]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Дата создания",-1)),t("div",mt,[e[18]||(e[18]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",ut,o(h(s.ticket.created_at)),1)])]),t("div",null,[e[21]||(e[21]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Последнее обновление",-1)),t("div",ct,[e[20]||(e[20]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",gt,o(h(s.ticket.updated_at)),1)])])])]),s.ticket.attachments&&s.ticket.attachments.length>0?(r(),n("div",xt,[t("h3",ft,[e[22]||(e[22]=t("svg",{class:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),e[23]||(e[23]=d(" Вложения ",-1)),t("span",ht,"("+o(s.ticket.attachments.length)+")",1)]),t("div",kt,[(r(!0),n(A,null,W(s.ticket.attachments,i=>(r(),n("div",{key:i.id,class:"group relative"},[i.file_type==="photo"?(r(),n("a",{key:0,href:`/storage/${i.file_path}`,target:"_blank",class:"aspect-square rounded-lg overflow-hidden bg-gray-900 border border-gray-700 hover:border-green-500 transition-colors block"},[t("img",{src:`/storage/${i.file_path}`,alt:"Фото",class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:z},null,40,vt),e[24]||(e[24]=t("div",{class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])],-1))],8,bt)):i.file_type==="video"?(r(),n("a",{key:1,href:`/storage/${i.file_path}`,target:"_blank",class:"aspect-square rounded-lg overflow-hidden bg-gray-900 border border-gray-700 hover:border-green-500 transition-colors flex items-center justify-center relative"},[...e[25]||(e[25]=[t("svg",{class:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("span",{class:"absolute bottom-2 left-2 text-xs text-white bg-black/70 px-2 py-1 rounded"},"Видео",-1)])],8,wt)):(r(),n("a",{key:2,href:`/storage/${i.file_path}`,target:"_blank",download:i.file_name,class:"aspect-square rounded-lg overflow-hidden bg-gray-900 border border-gray-700 hover:border-green-500 transition-colors flex flex-col items-center justify-center p-4"},[e[26]||(e[26]=t("svg",{class:"w-12 h-12 text-green-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),t("span",pt,o(i.file_name),1)],8,yt))]))),128))]),e[27]||(e[27]=t("p",{class:"mt-4 text-sm text-gray-400 flex items-center gap-2"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),d(" Нажмите на файл для просмотра в полном размере ")],-1))])):g("",!0),u.value?(r(),n("div",{key:1,class:"fixed inset-0 z-50 overflow-y-auto",onClick:e[3]||(e[3]=D(i=>u.value=!1,["self"]))},[t("div",jt,[e[32]||(e[32]=t("div",{class:"fixed inset-0 bg-black/70 backdrop-blur-sm transition-opacity"},null,-1)),t("div",Mt,[e[30]||(e[30]=t("h3",{class:"text-2xl font-bold text-white mb-4"},"Подтверждение удаления",-1)),e[31]||(e[31]=t("p",{class:"text-gray-300 mb-6"},"Вы действительно хотите удалить эту заявку? Это действие нельзя отменить.",-1)),t("div",Ct,[m(M,{onClick:e[2]||(e[2]=i=>u.value=!1)},{default:a(()=>[...e[28]||(e[28]=[d(" Отмена ",-1)])]),_:1}),m(j,{onClick:B,class:p({"opacity-25":x(f).processing}),disabled:x(f).processing},{default:a(()=>[...e[29]||(e[29]=[d(" Удалить ",-1)])]),_:1},8,["class","disabled"])])])])])):g("",!0)])])]}),_:1}))}};export{Zt as default};
