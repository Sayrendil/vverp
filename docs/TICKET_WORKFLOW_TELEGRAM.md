# üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ —á–µ—Ä–µ–∑ Telegram - –ü–æ–ª–Ω—ã–π Workflow

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏ —á–µ—Ä–µ–∑ Telegram —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –∏ –∞–≤—Ç–æ—Ä–æ–≤.

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ workflow

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –°–û–ó–î–ê–ù–ê   ‚îÇ ‚Üê –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îÇ ‚úÖ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: "–í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É"
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –í –†–ê–ë–û–¢–ï   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚è∏Ô∏è "–û—Ç–ª–æ–∂–∏—Ç—å" ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ –û–¢–õ–û–ñ–ï–ù–ê
       ‚îÇ                                ‚îÇ
       ‚îÇ                                ‚îî‚îÄ‚îÄ‚ñ∫ ‚úÖ "–ù–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ"
       ‚îÇ                                              ‚îÇ
       ‚îÇ ‚úÖ "–ù–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ"                       ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                      ‚îÇ
                                                      ‚ñº
                                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                            ‚îÇ –ù–ê –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ò‚îÇ
                                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                     ‚îÇ
                                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                    ‚îÇ                                 ‚îÇ
                                    ‚ñº                                 ‚ñº
                           ‚úÖ –ê–≤—Ç–æ—Ä: "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"         ‚ùå –ê–≤—Ç–æ—Ä: "–í–µ—Ä–Ω—É—Ç—å"
                                    ‚îÇ                                 ‚îÇ
                                    ‚îÇ                                 ‚îÇ
                                    ‚ñº                                 ‚ñº
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ –ó–ê–í–ï–†–®–ï–ù–ê ‚îÇ                    ‚îÇ  –í –†–ê–ë–û–¢–ï   ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏

**–ö—Ç–æ**: –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ (—á–µ—Ä–µ–∑ Telegram –∏–ª–∏ Web)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:
- –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞—è–≤–∫–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `–°–û–ó–î–ê–ù–ê`
- –í—Å–µ–º –∞–∫—Ç–∏–≤–Ω—ã–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫–∏:
  - `‚úÖ –í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É`
  - `üëÅ –ü–æ–¥—Ä–æ–±–Ω–µ–µ`

**–ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
```
üÜï –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ #123

üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: IT –ø–æ–¥–¥–µ—Ä–∂–∫–∞
üè™ –ú–∞–≥–∞–∑–∏–Ω: –í–∫—É—Å–í–∏–ª–ª –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π
‚ùó –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞—Å—Å–∞
üë§ –ê–≤—Ç–æ—Ä: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω
üìä –°—Ç–∞—Ç—É—Å: –°–æ–∑–¥–∞–Ω–∞

üìù –ó–∞–≥–æ–ª–æ–≤–æ–∫:
–ö–∞—Å—Å–∞ ‚Ññ3 –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è

‚è∞ –°–æ–∑–¥–∞–Ω–∞: 17.11.2024 14:30

[ ‚úÖ –í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É ]
[  üëÅ –ü–æ–¥—Ä–æ–±–Ω–µ–µ    ]
```

### 2. –í–∑—è—Ç–∏–µ –≤ —Ä–∞–±–æ—Ç—É

**–ö—Ç–æ**: –õ—é–±–æ–π –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–î–µ–π—Å—Ç–≤–∏–µ**: –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É `‚úÖ –í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:
- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –Ω–∞ –∑–∞—è–≤–∫—É (`executor_id`)
- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `–í –†–ê–ë–û–¢–ï`
- –ê–≤—Ç–æ—Ä—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
  - `‚è∏Ô∏è –û—Ç–ª–æ–∂–∏—Ç—å`
  - `‚úÖ –ù–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ`
  - `üëÅ –ü–æ–¥—Ä–æ–±–Ω–µ–µ`

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É**:
```
‚úÖ –í–∞—à–∞ –∑–∞—è–≤–∫–∞ #123 –≤–∑—è—Ç–∞ –≤ —Ä–∞–±–æ—Ç—É

üë§ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: –ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä
```

**–ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è**:
```
üìå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–æ–π

–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:

[  ‚è∏Ô∏è –û—Ç–ª–æ–∂–∏—Ç—å      ]
[ ‚úÖ –ù–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ]
[  üëÅ –ü–æ–¥—Ä–æ–±–Ω–µ–µ     ]
```

### 3. –û—Ç–ª–æ–∂–∏—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ö—Ç–æ**: –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å

**–î–µ–π—Å—Ç–≤–∏–µ**: –ù–∞–∂–∏–º–∞–µ—Ç `‚è∏Ô∏è –û—Ç–ª–æ–∂–∏—Ç—å`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:
- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `–û–¢–õ–û–ñ–ï–ù–ê`
- –ê–≤—Ç–æ—Ä—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–∑–∂–µ –≤–µ—Ä–Ω—É—Ç—å –≤ —Ä–∞–±–æ—Ç—É –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É**:
```
‚è∏Ô∏è –í–∞—à–∞ –∑–∞—è–≤–∫–∞ #123 –æ—Ç–ª–æ–∂–µ–Ω–∞

üë§ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: –ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä
```

### 4. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

**–ö—Ç–æ**: –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å

**–î–µ–π—Å—Ç–≤–∏–µ**: –ù–∞–∂–∏–º–∞–µ—Ç `‚úÖ –ù–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ`

**–ò–∑ –∫–∞–∫–∏—Ö —Å—Ç–∞—Ç—É—Å–æ–≤**: `–í –†–ê–ë–û–¢–ï` –∏–ª–∏ `–û–¢–õ–û–ñ–ï–ù–ê`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:
- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `–ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ê` (–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏)
- –ê–≤—Ç–æ—Ä—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏:
  - `‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ`
  - `‚ùå –í–µ—Ä–Ω—É—Ç—å –≤ —Ä–∞–±–æ—Ç—É`

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É**:
```
‚úÖ –ó–∞—è–≤–∫–∞ #123 –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

üè™ –ú–∞–≥–∞–∑–∏–Ω: –í–∫—É—Å–í–∏–ª–ª –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π
‚ùó –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞—Å—Å–∞
üë§ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: –ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä

üìù –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ:

[ ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ ]
[   ‚ùå –í–µ—Ä–Ω—É—Ç—å –≤ —Ä–∞–±–æ—Ç—É     ]
```

### 5A. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–ö—Ç–æ**: –ê–≤—Ç–æ—Ä –∑–∞—è–≤–∫–∏

**–î–µ–π—Å—Ç–≤–∏–µ**: –ù–∞–∂–∏–º–∞–µ—Ç `‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:
- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `–ó–ê–í–ï–†–®–ï–ù–ê`
- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
- –ó–∞—è–≤–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é**:
```
üéâ –ó–∞—è–≤–∫–∞ #123 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

‚úÖ –ê–≤—Ç–æ—Ä –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É**:
```
üéâ –ó–∞—è–≤–∫–∞ #123 –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –°–ø–∞—Å–∏–±–æ!
```

### 5B. –í–æ–∑–≤—Ä–∞—Ç –≤ —Ä–∞–±–æ—Ç—É

**–ö—Ç–æ**: –ê–≤—Ç–æ—Ä –∑–∞—è–≤–∫–∏

**–î–µ–π—Å—Ç–≤–∏–µ**: –ù–∞–∂–∏–º–∞–µ—Ç `‚ùå –í–µ—Ä–Ω—É—Ç—å –≤ —Ä–∞–±–æ—Ç—É`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:
- –°—Ç–∞—Ç—É—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ `–í –†–ê–ë–û–¢–ï`
- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Å —à–∞–≥–∞ 2

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é**:
```
üîÑ –ó–∞—è–≤–∫–∞ #123 –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –≤ —Ä–∞–±–æ—Ç—É

‚ùå –ê–≤—Ç–æ—Ä –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É**:
```
üîÑ –ó–∞—è–≤–∫–∞ #123 –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –≤ —Ä–∞–±–æ—Ç—É.
```

## üîê –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
- –î–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∑–∞—è–≤–∫–∏ (—Ç–∞–±–ª–∏—Ü–∞ `category_executors`)
- –ê–∫—Ç–∏–≤–µ–Ω (`is_active = true`)
- –ò–º–µ–µ—Ç `telegram_id`

**–ú–æ–∂–µ—Ç**:
- ‚úÖ –í–∑—è—Ç—å –ª—é–±—É—é –∑–∞—è–≤–∫—É —Å–≤–æ–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ —Ä–∞–±–æ—Ç—É
- ‚úÖ –û—Ç–ª–æ–∂–∏—Ç—å —Å–≤–æ–∏ –∑–∞—è–≤–∫–∏
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- ‚ùå –ù–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∑–∞—è–≤–∫–∞–º–∏ –¥—Ä—É–≥–∏—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π

### –ê–≤—Ç–æ—Ä—ã

**–ú–æ–∂–µ—Ç**:
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –∑–∞—è–≤–æ–∫
- ‚úÖ –í–µ—Ä–Ω—É—Ç—å —Å–≤–æ–∏ –∑–∞—è–≤–∫–∏ –≤ —Ä–∞–±–æ—Ç—É
- ‚ùå –ù–µ –º–æ–∂–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å —á—É–∂–∏–µ –∑–∞—è–≤–∫–∏

## üì± –ö–æ–º–∞–Ω–¥—ã –∏ callback data

### Callback –¥–∞–Ω–Ω—ã–µ

```php
// –î–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
take_work:{ticket_id}          // –í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É
postpone:{ticket_id}           // –û—Ç–ª–æ–∂–∏—Ç—å
send_confirmation:{ticket_id}  // –ù–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
view_ticket:{ticket_id}        // –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏

// –î–ª—è –∞–≤—Ç–æ—Ä–æ–≤
confirm_complete:{ticket_id}   // –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
reject_complete:{ticket_id}    // –í–µ—Ä–Ω—É—Ç—å –≤ —Ä–∞–±–æ—Ç—É
```

### –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
/start   # –ù–∞—á–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
/cancel  # –û—Ç–º–µ–Ω–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ
/skip    # –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —à–∞–≥
/help    # –°–ø—Ä–∞–≤–∫–∞
```

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **TicketWorkflowService** - –õ–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∞–º–∏
   - `takeToWork()` - –í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É
   - `postponeTicket()` - –û—Ç–ª–æ–∂–∏—Ç—å
   - `sendForConfirmation()` - –ù–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
   - `confirmCompletion()` - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
   - `rejectCompletion()` - –í–µ—Ä–Ω—É—Ç—å –≤ —Ä–∞–±–æ—Ç—É

2. **CallbackQueryHandler** - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–æ–∫
   - –ü–∞—Ä—Å–∏—Ç callback_data
   - –í—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥—ã TicketWorkflowService
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

3. **SendTicketCreatedNotificationToExecutors** - Listener
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º
   - –î–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

4. **Events**:
   - `TicketCreated` - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
   - `TicketAssigned` - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
   - `TicketStatusChanged` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```sql
-- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
CREATE TABLE category_executors (
    id BIGINT PRIMARY KEY,
    user_id BIGINT,           -- ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ticket_category_id BIGINT,-- ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    is_active BOOLEAN,        -- –ê–∫—Ç–∏–≤–µ–Ω –ª–∏
    priority INT,             -- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (0-10)
    max_tickets INT,          -- –ú–∞–∫—Å –∑–∞—è–≤–æ–∫
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);

-- –ó–∞—è–≤–∫–∏
CREATE TABLE tickets (
    id BIGINT PRIMARY KEY,
    author_id BIGINT,         -- –ê–≤—Ç–æ—Ä –∑–∞—è–≤–∫–∏
    executor_id BIGINT,       -- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
    status_id INT,            -- –°—Ç–∞—Ç—É—Å (1-5)
    ticket_category_id BIGINT,-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è
    -- –¥—Ä—É–≥–∏–µ –ø–æ–ª—è...
);

-- –°—Ç–∞—Ç—É—Å—ã
1 - –°–æ–∑–¥–∞–Ω–∞
2 - –í —Ä–∞–±–æ—Ç–µ
3 - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ (–ù–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏)
4 - –û—Ç–ª–æ–∂–µ–Ω–∞
5 - –ó–∞–≤–µ—Ä—à–µ–Ω–∞
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π

```bash
# –ó–∞–ø—É—Å–∫ worker –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
php artisan queue:work --queue=notifications --tries=3 --timeout=120
```

### 2. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# Long Polling —Ä–µ–∂–∏–º
php artisan telegram:polling
```

### 3. Supervisor –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```ini
[program:vverp-telegram-bot]
command=php /path/to/artisan telegram:polling
autostart=true
autorestart=true
user=www-data

[program:vverp-queue-notifications]
command=php /path/to/artisan queue:work --queue=notifications --tries=3 --timeout=120
autostart=true
autorestart=true
user=www-data
numprocs=2
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º
php artisan test:executor-notifications {ticket_id}
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è

```bash
# 1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É
php artisan tinker
>>> $ticket = App\Models\Ticket::factory()->create([
...   'ticket_category_id' => 2,
...   'status_id' => 1,
... ]);
>>> event(new App\Events\TicketCreated($ticket));

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Telegram - –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
# 3. –ù–∞–∂–∞—Ç—å "–í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É"
# 4. –ù–∞–∂–∞—Ç—å "–ù–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ"
# 5. –û—Ç –∏–º–µ–Ω–∏ –∞–≤—Ç–æ—Ä–∞ –Ω–∞–∂–∞—Ç—å "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏
tail -f storage/logs/laravel.log | grep -E "ticket|workflow|executor"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏
php artisan queue:monitor notifications
```

## üêõ Troubleshooting

### –ö–Ω–æ–ø–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –Ω–µ –¥–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∞

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—É—â–µ–Ω –ª–∏ –±–æ—Ç: `ps aux | grep telegram:polling`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f storage/logs/laravel.log`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ CallbackQueryHandler –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å TicketWorkflowService

### –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É" - –æ—à–∏–±–∫–∞ –ø—Ä–∞–≤

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:
```sql
SELECT * FROM category_executors
WHERE user_id = ? AND ticket_category_id = ?;
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–∫—Ç–∏–≤–µ–Ω:
```sql
UPDATE category_executors
SET is_active = true
WHERE user_id = ? AND ticket_category_id = ?;
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ telegram_id:
```sql
SELECT telegram_id FROM users WHERE id = ?;
```

### –ê–≤—Ç–æ—Ä –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏–ª –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –Ω–æ –∞–≤—Ç–æ—Ä –Ω–µ –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ telegram_id –∞–≤—Ç–æ—Ä–∞:
```sql
SELECT telegram_id FROM users WHERE id = (
    SELECT author_id FROM tickets WHERE id = ?
);
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∞–≤—Ç–æ—Ä –Ω–∞—á–∞–ª —á–∞—Ç —Å –±–æ—Ç–æ–º (–æ—Ç–ø—Ä–∞–≤–∏–ª /start)

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—á–µ—Ä–µ–¥—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
```bash
php artisan queue:work --queue=notifications
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

```sql
-- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞—è–≤–æ–∫
SELECT
    ticket_category_id,
    AVG(TIMESTAMPDIFF(HOUR, created_at, updated_at)) as avg_hours
FROM tickets
WHERE status_id = 5
GROUP BY ticket_category_id;

-- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
SELECT
    u.name,
    COUNT(*) as active_tickets
FROM tickets t
JOIN users u ON t.executor_id = u.id
WHERE t.status_id IN (2, 4)
GROUP BY u.id, u.name
ORDER BY active_tickets DESC;

-- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (—Å–∫–æ–ª—å–∫–æ —Å—Ä–∞–∑—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç)
SELECT
    COUNT(CASE WHEN status_id = 5 THEN 1 END) as confirmed,
    COUNT(CASE WHEN status_id = 2 THEN 1 END) as returned,
    ROUND(COUNT(CASE WHEN status_id = 5 THEN 1 END) * 100.0 / COUNT(*), 2) as confirmation_rate
FROM tickets
WHERE status_id IN (2, 5);
```

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è**:
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–∫–∞—Ö
   - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∞–≤—Ç–æ—Ä—É –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

2. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**:
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ Telegram
   - –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –ø–æ –∑–∞—è–≤–∫–µ

3. **–§–æ—Ç–æ –æ—Ç—á–µ—Ç—ã**:
   - –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç —Ñ–æ—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã
   - –ê–≤—Ç–æ—Ä –≤–∏–¥–∏—Ç —Ñ–æ—Ç–æ –ø–µ—Ä–µ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º

4. **–†–µ–π—Ç–∏–Ω–≥**:
   - –ê–≤—Ç–æ—Ä –º–æ–∂–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å —Ä–∞–±–æ—Ç—É –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è (1-5 –∑–≤–µ–∑–¥)
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º

5. **Auto-assignment**:
   - –£–º–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
   - –†–æ—Ç–∞—Ü–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π

6. **SLA —Ç—Ä–µ–∫–∏–Ω–≥**:
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ–∞–∫—Ü–∏–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ SLA
