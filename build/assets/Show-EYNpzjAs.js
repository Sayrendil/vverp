import{I as ft,k as g,u as E,r as H,c as p,w as c,a as t,b as v,d as a,e as u,f as m,l as pt,g as r,t as d,o,n as I,F as W,h as T,j as Z,m as _,A as tt,C as b}from"./app-CP4UpOIz.js";import{_ as vt}from"./AppLayout-O7ATnjip.js";import{_ as D}from"./DangerButton-CMJy3oZz.js";import{_ as C}from"./SecondaryButton-CuuUnyQ1.js";import{_ as j}from"./PrimaryButton-CBclvA3J.js";/* empty css            */const bt={class:"flex justify-between items-center"},wt={class:"font-semibold text-xl text-white leading-tight"},ht={class:"flex gap-2"},yt={key:2,class:"inline-flex items-center px-4 py-2 bg-green-500/20 text-green-400 border border-green-500/50 rounded-lg text-sm font-medium"},Ct={class:"py-10 px-4 sm:px-6 lg:px-8"},jt={class:"max-w-7xl mx-auto"},Mt={class:"bg-gray-800/50 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-8 mb-6 shadow-xl"},Bt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4"},zt={class:"text-3xl font-bold text-white"},It={key:0,class:"mb-6"},St={class:"text-gray-300 leading-relaxed"},Vt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},$t={class:"flex items-center gap-2"},At={class:"text-white font-medium"},Et={class:"flex items-center gap-2"},Ht={class:"text-white font-medium"},Wt={class:"flex items-center gap-2"},Tt={class:"text-white font-medium"},Zt={class:"flex items-center gap-2"},Dt={class:"text-white font-medium"},Lt={class:"flex items-center gap-2"},Ft={class:"w-8 h-8 rounded-full bg-gradient-to-r from-green-600 to-emerald-600 flex items-center justify-center text-white text-sm font-semibold"},Nt={class:"text-white font-medium"},Gt={key:0,class:"flex items-center gap-2"},Pt={class:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-600 to-cyan-600 flex items-center justify-center text-white text-sm font-semibold"},Ot={class:"text-white font-medium"},Rt={key:1,class:"text-gray-500"},Qt={class:"flex items-center gap-2"},Ut={class:"text-white font-medium"},Jt={class:"flex items-center gap-2"},Yt={class:"text-white font-medium"},qt={key:0,class:"bg-gradient-to-r from-purple-900/20 to-purple-800/20 backdrop-blur-xl border border-purple-500/50 rounded-2xl p-6 mb-6 shadow-xl"},Xt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Kt={class:"bg-gray-900/50 rounded-lg p-4 border border-gray-700/50"},_t={class:"space-y-2"},te={class:"bg-gray-900/50 rounded-lg p-4 border border-gray-700/50"},ee={class:"bg-gray-900/50 rounded-lg p-4 border border-gray-700/50"},se={class:"text-xs text-gray-400 leading-relaxed"},oe={key:1,class:"bg-gray-800/50 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-6 mb-6 shadow-xl"},re={class:"flex flex-wrap gap-3"},le={class:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-gray-700/30"},ne={class:"flex items-start gap-2"},ie={class:"text-sm text-gray-300"},ae={key:0,class:"mb-1"},de={key:1,class:"mb-1"},ue={key:2},ce={key:2,class:"bg-gray-800/50 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-6 shadow-xl"},me={class:"text-xl font-bold text-white mb-4 flex items-center gap-2"},ge={class:"text-sm text-gray-400"},xe={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},ke=["href"],fe=["src"],pe=["href"],ve=["href","download"],be={class:"text-xs text-gray-400 text-center break-all"},we={class:"flex items-center justify-center min-h-screen px-4"},he={class:"relative bg-gray-800 rounded-2xl p-8 max-w-md w-full shadow-2xl border border-gray-700"},ye={class:"flex gap-3 justify-end"},Ce={class:"flex items-center justify-center min-h-screen px-4"},je={class:"relative bg-gray-800 rounded-2xl p-8 max-w-md w-full shadow-2xl border border-purple-700"},Me={key:0,class:"mb-6"},Be=["value"],ze={key:1,class:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg"},Ie={class:"flex gap-3 justify-end"},Se={class:"flex items-center justify-center min-h-screen px-4"},Ve={class:"relative bg-gray-800 rounded-2xl p-8 max-w-md w-full shadow-2xl border border-purple-700"},$e={class:"mb-6"},Ae=["value"],Ee={class:"mt-2 text-xs text-gray-400"},He={class:"font-semibold text-white"},We={class:"flex gap-3 justify-end"},Ge={__name:"Show",props:{ticket:Object,isExecutorOfCategory:Boolean,availableExecutors:Array,allStatuses:Array},setup(s){var O;const i=s,et=ft(),M=g(()=>et.props.auth.user),S=E({}),B=H(!1),k=E({executor_id:null}),w=E({status_id:((O=i.ticket.status)==null?void 0:O.id)||null}),h=H(!1),y=H(!1),z=g(()=>{var l;return((l=i.ticket.executor)==null?void 0:l.id)===M.value.id}),V=g(()=>{var l;return((l=i.ticket.author)==null?void 0:l.id)===M.value.id}),st=g(()=>M.value.role==="admin"&&M.value.ticket_category_id===i.ticket.ticket_category_id),$=g(()=>{var x,f;const l=((x=i.ticket.status)==null?void 0:x.name)==="Создана"&&!i.ticket.executor&&i.isExecutorOfCategory,e=((f=i.ticket.status)==null?void 0:f.name)==="Отложена"&&(z.value||!i.ticket.executor&&i.isExecutorOfCategory);return l||e}),L=g(()=>{var x,f;const l=((x=i.ticket.status)==null?void 0:x.name)==="Создана"&&i.isExecutorOfCategory,e=z.value&&((f=i.ticket.status)==null?void 0:f.name)==="В работе";return l||e}),F=g(()=>{var l;return z.value&&((l=i.ticket.status)==null?void 0:l.name)==="В работе"}),N=g(()=>{var l;return V.value&&((l=i.ticket.status)==null?void 0:l.name)==="Подтверждена"}),G=g(()=>{var l;return V.value&&((l=i.ticket.status)==null?void 0:l.name)==="Подтверждена"}),A=g(()=>{var l;return((l=i.ticket.status)==null?void 0:l.name)==="Завершена"}),ot=g(()=>!A.value),rt=g(()=>!A.value),lt=()=>{b.post(route("tickets.take-to-work",i.ticket.id))},nt=()=>{b.post(route("tickets.postpone",i.ticket.id))},it=()=>{b.post(route("tickets.send-for-confirmation",i.ticket.id))},at=()=>{b.post(route("tickets.confirm-completion",i.ticket.id))},dt=()=>{b.post(route("tickets.return-to-work",i.ticket.id))},P=l=>new Date(l).toLocaleString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),ut=l=>({Создана:"bg-gray-500/20 text-gray-400 border-gray-500/50","В работе":"bg-blue-500/20 text-blue-400 border-blue-500/50",Подтверждена:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50",Отложена:"bg-orange-500/20 text-orange-400 border-orange-500/50",Завершена:"bg-green-500/20 text-green-400 border-green-500/50"})[l]||"bg-gray-500/20 text-gray-400 border-gray-500/50",ct=()=>{S.delete(route("tickets.destroy",i.ticket.id))},mt=l=>{l.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzI4MjgyOCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM2NjY2NjYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5ObyBpbWFnZTwvdGV4dD48L3N2Zz4="},gt=()=>{k.executor_id&&k.post(route("tickets.assign-executor",i.ticket.id),{preserveScroll:!0,onSuccess:()=>{h.value=!1,k.reset()}})},xt=()=>{confirm("Вы уверены, что хотите снять исполнителя с заявки?")&&b.post(route("tickets.unassign-executor",i.ticket.id))},kt=()=>{w.status_id&&w.post(route("tickets.admin-change-status",i.ticket.id),{preserveScroll:!0,onSuccess:()=>{y.value=!1}})};return(l,e)=>(o(),p(vt,{title:"Просмотр заявки"},{header:c(()=>[t("div",bt,[t("h2",wt," Заявка #"+d(s.ticket.id),1),t("div",ht,[ot.value?(o(),p(C,{key:0,onClick:e[0]||(e[0]=x=>m(b).visit(l.route("tickets.edit",s.ticket.id)))},{default:c(()=>[...e[12]||(e[12]=[r(" Редактировать ",-1)])]),_:1})):u("",!0),rt.value?(o(),p(D,{key:1,onClick:e[1]||(e[1]=x=>B.value=!0)},{default:c(()=>[...e[13]||(e[13]=[r(" Удалить ",-1)])]),_:1})):u("",!0),A.value?(o(),a("span",yt,[...e[14]||(e[14]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),r(" Заявка завершена ",-1)])])):u("",!0)])])]),default:c(()=>{var x,f,R,Q,U,J,Y,q,X,K;return[t("div",Ct,[t("div",jt,[v(m(pt),{href:l.route("tickets.index"),class:"inline-flex items-center text-gray-400 hover:text-green-400 mb-6 transition-colors"},{default:c(()=>[...e[15]||(e[15]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),r(" Назад к списку ",-1)])]),_:1},8,["href"]),t("div",Mt,[t("div",Bt,[t("h1",zt,d(s.ticket.title),1),s.ticket.status?(o(),a("span",{key:0,class:I(["inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border",ut(s.ticket.status.name)])},d(s.ticket.status.name),3)):u("",!0)]),s.ticket.description?(o(),a("div",It,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-white mb-2"},"Описание",-1)),t("p",St,d(s.ticket.description),1)])):u("",!0),t("div",Vt,[t("div",null,[e[18]||(e[18]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Категория",-1)),t("div",$t,[e[17]||(e[17]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1)),t("span",At,d(((x=s.ticket.ticketCategory)==null?void 0:x.name)||"Не указана"),1)])]),t("div",null,[e[20]||(e[20]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Тип проблемы",-1)),t("div",Et,[e[19]||(e[19]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),t("span",Ht,d(((f=s.ticket.problem)==null?void 0:f.name)||"Не указан"),1)])]),t("div",null,[e[22]||(e[22]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Магазин",-1)),t("div",Wt,[e[21]||(e[21]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),t("span",Tt,d(((R=s.ticket.store)==null?void 0:R.name)||"Не указан"),1)])]),t("div",null,[e[24]||(e[24]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Касса",-1)),t("div",Zt,[e[23]||(e[23]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1)),t("span",Dt,d(((Q=s.ticket.cash)==null?void 0:Q.name)||"Не указана"),1)])]),t("div",null,[e[25]||(e[25]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Автор",-1)),t("div",Lt,[t("div",Ft,d(((U=s.ticket.author)==null?void 0:U.name.charAt(0))||"?"),1),t("span",Nt,d(((J=s.ticket.author)==null?void 0:J.name)||"Неизвестен"),1)])]),t("div",null,[e[26]||(e[26]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Исполнитель",-1)),s.ticket.executor?(o(),a("div",Gt,[t("div",Pt,d(s.ticket.executor.name.charAt(0)),1),t("span",Ot,d(s.ticket.executor.name),1)])):(o(),a("span",Rt,"Не назначен"))]),t("div",null,[e[28]||(e[28]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Дата создания",-1)),t("div",Qt,[e[27]||(e[27]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",Ut,d(P(s.ticket.created_at)),1)])]),t("div",null,[e[30]||(e[30]=t("h4",{class:"text-sm font-medium text-gray-400 mb-2"},"Последнее обновление",-1)),t("div",Jt,[e[29]||(e[29]=t("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",Yt,d(P(s.ticket.updated_at)),1)])])])]),st.value?(o(),a("div",qt,[e[37]||(e[37]=t("h3",{class:"text-xl font-bold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),r(" Управление администратора ")],-1)),t("div",Xt,[t("div",Kt,[e[33]||(e[33]=t("h4",{class:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2"},[t("svg",{class:"w-4 h-4 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),r(" Исполнитель ")],-1)),t("div",_t,[t("button",{onClick:e[2]||(e[2]=n=>h.value=!0),class:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-lg transition-colors flex items-center justify-center gap-2"},[e[31]||(e[31]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),r(" "+d(s.ticket.executor?"Сменить":"Назначить"),1)]),s.ticket.executor?(o(),a("button",{key:0,onClick:xt,class:"w-full px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 text-sm rounded-lg transition-colors flex items-center justify-center gap-2"},[...e[32]||(e[32]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),r(" Снять ",-1)])])):u("",!0)])]),t("div",te,[e[35]||(e[35]=t("h4",{class:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2"},[t("svg",{class:"w-4 h-4 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),r(" Статус ")],-1)),t("button",{onClick:e[3]||(e[3]=n=>y.value=!0),class:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-lg transition-colors flex items-center justify-center gap-2"},[...e[34]||(e[34]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),r(" Изменить статус ",-1)])])]),t("div",ee,[e[36]||(e[36]=t("h4",{class:"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2"},[t("svg",{class:"w-4 h-4 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),r(" Информация ")],-1)),t("p",se,' У вас есть полные права на управление этой заявкой как у администратора категории "'+d((Y=s.ticket.ticketCategory)==null?void 0:Y.name)+'" ',1)])])])):u("",!0),$.value||L.value||F.value||N.value||G.value?(o(),a("div",oe,[e[47]||(e[47]=t("h3",{class:"text-xl font-bold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),r(" Действия с заявкой ")],-1)),t("div",re,[$.value?(o(),p(j,{key:0,onClick:lt,type:"button"},{default:c(()=>[...e[38]||(e[38]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),r(" Взять в работу ",-1)])]),_:1})):u("",!0),L.value?(o(),p(C,{key:1,onClick:nt,type:"button"},{default:c(()=>[...e[39]||(e[39]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),r(" Отложить ",-1)])]),_:1})):u("",!0),F.value?(o(),p(j,{key:2,onClick:it,type:"button"},{default:c(()=>[...e[40]||(e[40]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),r(" Отправить на подтверждение ",-1)])]),_:1})):u("",!0),N.value?(o(),p(j,{key:3,onClick:at,type:"button"},{default:c(()=>[...e[41]||(e[41]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),r(" Подтвердить выполнение ",-1)])]),_:1})):u("",!0),G.value?(o(),p(D,{key:4,onClick:dt,type:"button"},{default:c(()=>[...e[42]||(e[42]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),r(" Вернуть в работу ",-1)])]),_:1})):u("",!0)]),t("div",le,[t("div",ne,[e[46]||(e[46]=t("svg",{class:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",ie,[$.value?(o(),a("p",ae,[...e[43]||(e[43]=[t("span",{class:"font-semibold text-white"},"Доступные действия:",-1),r(" Вы можете взять эту заявку в работу. ",-1)])])):u("",!0),z.value&&((q=s.ticket.status)==null?void 0:q.name)==="В работе"?(o(),a("p",de,[...e[44]||(e[44]=[t("span",{class:"font-semibold text-white"},"Вы исполнитель:",-1),r(" Можете отложить заявку или отправить на подтверждение автору. ",-1)])])):u("",!0),V.value&&((X=s.ticket.status)==null?void 0:X.name)==="Подтверждена"?(o(),a("p",ue,[...e[45]||(e[45]=[t("span",{class:"font-semibold text-white"},"Вы автор:",-1),r(" Можете подтвердить выполнение или вернуть заявку в работу. ",-1)])])):u("",!0)])])])])):u("",!0),s.ticket.attachments&&s.ticket.attachments.length>0?(o(),a("div",ce,[t("h3",me,[e[48]||(e[48]=t("svg",{class:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),e[49]||(e[49]=r(" Вложения ",-1)),t("span",ge,"("+d(s.ticket.attachments.length)+")",1)]),t("div",xe,[(o(!0),a(W,null,T(s.ticket.attachments,n=>(o(),a("div",{key:n.id,class:"group relative"},[n.file_type==="photo"?(o(),a("a",{key:0,href:`/storage/${n.file_path}`,target:"_blank",class:"aspect-square rounded-lg overflow-hidden bg-gray-900 border border-gray-700 hover:border-green-500 transition-colors block"},[t("img",{src:`/storage/${n.file_path}`,alt:"Фото",class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:mt},null,40,fe),e[50]||(e[50]=t("div",{class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])],-1))],8,ke)):n.file_type==="video"?(o(),a("a",{key:1,href:`/storage/${n.file_path}`,target:"_blank",class:"aspect-square rounded-lg overflow-hidden bg-gray-900 border border-gray-700 hover:border-green-500 transition-colors flex items-center justify-center relative"},[...e[51]||(e[51]=[t("svg",{class:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("span",{class:"absolute bottom-2 left-2 text-xs text-white bg-black/70 px-2 py-1 rounded"},"Видео",-1)])],8,pe)):(o(),a("a",{key:2,href:`/storage/${n.file_path}`,target:"_blank",download:n.file_name,class:"aspect-square rounded-lg overflow-hidden bg-gray-900 border border-gray-700 hover:border-green-500 transition-colors flex flex-col items-center justify-center p-4"},[e[52]||(e[52]=t("svg",{class:"w-12 h-12 text-green-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),t("span",be,d(n.file_name),1)],8,ve))]))),128))]),e[53]||(e[53]=t("p",{class:"mt-4 text-sm text-gray-400 flex items-center gap-2"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),r(" Нажмите на файл для просмотра в полном размере ")],-1))])):u("",!0),B.value?(o(),a("div",{key:3,class:"fixed inset-0 z-50 overflow-y-auto",onClick:e[5]||(e[5]=Z(n=>B.value=!1,["self"]))},[t("div",we,[e[58]||(e[58]=t("div",{class:"fixed inset-0 bg-black/70 backdrop-blur-sm transition-opacity"},null,-1)),t("div",he,[e[56]||(e[56]=t("h3",{class:"text-2xl font-bold text-white mb-4"},"Подтверждение удаления",-1)),e[57]||(e[57]=t("p",{class:"text-gray-300 mb-6"},"Вы действительно хотите удалить эту заявку? Это действие нельзя отменить.",-1)),t("div",ye,[v(C,{onClick:e[4]||(e[4]=n=>B.value=!1)},{default:c(()=>[...e[54]||(e[54]=[r(" Отмена ",-1)])]),_:1}),v(D,{onClick:ct,class:I({"opacity-25":m(S).processing}),disabled:m(S).processing},{default:c(()=>[...e[55]||(e[55]=[r(" Удалить ",-1)])]),_:1},8,["class","disabled"])])])])])):u("",!0),h.value?(o(),a("div",{key:4,class:"fixed inset-0 z-50 overflow-y-auto",onClick:e[8]||(e[8]=Z(n=>h.value=!1,["self"]))},[t("div",Ce,[e[66]||(e[66]=t("div",{class:"fixed inset-0 bg-black/70 backdrop-blur-sm transition-opacity"},null,-1)),t("div",je,[e[64]||(e[64]=t("h3",{class:"text-2xl font-bold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),r(" Назначить исполнителя ")],-1)),e[65]||(e[65]=t("p",{class:"text-gray-300 mb-4"},"Выберите исполнителя из списка активных исполнителей вашей категории:",-1)),s.availableExecutors&&s.availableExecutors.length>0?(o(),a("div",Me,[e[60]||(e[60]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Исполнитель",-1)),_(t("select",{"onUpdate:modelValue":e[6]||(e[6]=n=>m(k).executor_id=n),class:"w-full bg-gray-700/50 border-gray-600 text-white rounded-lg px-4 py-2.5 focus:border-purple-500 focus:ring-purple-500"},[e[59]||(e[59]=t("option",{value:null},"Выберите исполнителя",-1)),(o(!0),a(W,null,T(s.availableExecutors,n=>(o(),a("option",{key:n.id,value:n.id},d(n.name)+" ("+d(n.email)+") ",9,Be))),128))],512),[[tt,m(k).executor_id]])])):(o(),a("div",ze,[...e[61]||(e[61]=[t("p",{class:"text-sm text-yellow-400"},"Нет доступных исполнителей в вашей категории",-1)])])),t("div",Ie,[v(C,{onClick:e[7]||(e[7]=n=>h.value=!1)},{default:c(()=>[...e[62]||(e[62]=[r(" Отмена ",-1)])]),_:1}),v(j,{onClick:gt,class:I([{"opacity-25":m(k).processing||!m(k).executor_id},"!bg-purple-600 hover:!bg-purple-700"]),disabled:m(k).processing||!m(k).executor_id},{default:c(()=>[...e[63]||(e[63]=[r(" Назначить ",-1)])]),_:1},8,["class","disabled"])])])])])):u("",!0),y.value?(o(),a("div",{key:5,class:"fixed inset-0 z-50 overflow-y-auto",onClick:e[11]||(e[11]=Z(n=>y.value=!1,["self"]))},[t("div",Se,[e[73]||(e[73]=t("div",{class:"fixed inset-0 bg-black/70 backdrop-blur-sm transition-opacity"},null,-1)),t("div",Ve,[e[71]||(e[71]=t("h3",{class:"text-2xl font-bold text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),r(" Изменить статус ")],-1)),e[72]||(e[72]=t("p",{class:"text-gray-300 mb-4"},"Выберите новый статус для заявки:",-1)),t("div",$e,[e[68]||(e[68]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Статус",-1)),_(t("select",{"onUpdate:modelValue":e[9]||(e[9]=n=>m(w).status_id=n),class:"w-full bg-gray-700/50 border-gray-600 text-white rounded-lg px-4 py-2.5 focus:border-purple-500 focus:ring-purple-500"},[(o(!0),a(W,null,T(s.allStatuses,n=>(o(),a("option",{key:n.id,value:n.id},d(n.name),9,Ae))),128))],512),[[tt,m(w).status_id]]),t("p",Ee,[e[67]||(e[67]=r(" Текущий статус: ",-1)),t("span",He,d((K=s.ticket.status)==null?void 0:K.name),1)])]),t("div",We,[v(C,{onClick:e[10]||(e[10]=n=>y.value=!1)},{default:c(()=>[...e[69]||(e[69]=[r(" Отмена ",-1)])]),_:1}),v(j,{onClick:kt,class:I([{"opacity-25":m(w).processing},"!bg-purple-600 hover:!bg-purple-700"]),disabled:m(w).processing},{default:c(()=>[...e[70]||(e[70]=[r(" Изменить ",-1)])]),_:1},8,["class","disabled"])])])])])):u("",!0)])])]}),_:1}))}};export{Ge as default};
